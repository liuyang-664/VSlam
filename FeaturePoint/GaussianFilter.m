function [newimg] = GaussianFilter(img)
%高斯滤波
% %方差为2 窗口大小9*9
% boxSize = 9;
% % 指定噪声标准差
% sigma2 = 2;
% siz = (boxSize-1)/2;
% % 生成权重矩阵
% [x1,x2] = meshgrid(-siz:siz,-siz:siz);
% h = exp(-(x1.^2 + x2.^2)/(2*sigma2));
% h = h/sum(sum(h));

%减小运算量，直接调用算好的
h = get_h();
newimg = filter2(h,img);

end

function h = get_h()
h = [2.67573907986126e-05,0.000153978152692627,0.000537436560853694,...
    0.00113775320825553,0.00146090403731812,0.00113775320825553,...
    0.000537436560853694,0.000153978152692627,2.67573907986126e-05;...
    0.000153978152692627,0.000886083089531410,0.00309273387127199,...
    0.00654731765686138,0.00840692228253844,0.00654731765686138,...
    0.00309273387127199,0.000886083089531410,0.000153978152692627;...
    0.000537436560853694,0.00309273387127199,0.0107947018868979,...
    0.0228523840738917,0.0293430419827871,0.0228523840738917,...
    0.0107947018868979,0.00309273387127199,0.000537436560853694;...
    0.00113775320825553,0.00654731765686138,0.0228523840738917,...
    0.0483784974640679,0.0621192203650266,0.0483784974640679,...
    0.0228523840738917,0.00654731765686138,0.00113775320825553;...
    0.00146090403731812,0.00840692228253844,0.0293430419827871,...
    0.0621192203650266,0.0797626578135209,0.0621192203650266,...
    0.0293430419827871,0.00840692228253844,0.00146090403731812;...
    0.00113775320825553,0.00654731765686138,0.0228523840738917,...
    0.0483784974640679,0.0621192203650266,0.0483784974640679,...
    0.0228523840738917,0.00654731765686138,0.00113775320825553;...
    0.000537436560853694,0.00309273387127199,0.0107947018868979,...
    0.0228523840738917,0.0293430419827871,0.0228523840738917,...
    0.0107947018868979,0.00309273387127199,0.000537436560853694;...
    0.000153978152692627,0.000886083089531410,0.00309273387127199,...
    0.00654731765686138,0.00840692228253844,0.00654731765686138,...
    0.00309273387127199,0.000886083089531410,0.000153978152692627;...
    2.67573907986126e-05,0.000153978152692627,0.000537436560853694,...
    0.00113775320825553,0.00146090403731812,0.00113775320825553,...
    0.000537436560853694,0.000153978152692627,2.67573907986126e-05];
end